{{ define "head" }}
{{ $options := dict "transpiler" "dartsass" "targetPath" "css/list.css" }}
{{ with resources.Get "sass/layouts/list.scss" | toCSS $options | postCSS | minify | fingerprint }}
  <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
{{ end }}
<style>
.blog-tag {
    display: inline-flex;
    align-items: center;
    padding: 0.3rem 0.7rem;
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 5px;
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.01em;
    color: inherit;
    text-decoration: none;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(8px);
    opacity: 0.85;
    margin-right: 0.4rem;
    margin-bottom: 0.3rem;
}

.blog-tag:hover {
    opacity: 1;
    border-color: rgba(0, 0, 0, 0.15);
}

.tag-prefix {
    opacity: 0.5;
    font-weight: 400;
    margin-right: 0.1rem;
}

.tag-separator {
    opacity: 0.35;
    margin: 0 0.15rem;
    font-weight: 300;
}

.tag-leaf {
    font-weight: 600;
}

.post-topics {
    display: flex;
    flex-wrap: wrap;
    gap: 0;
    margin-top: 0.3rem;
    margin-left: auto;
    flex-shrink: 0;
    justify-content: flex-end;
    max-width: 50%;
}

.post-item {
    display: flex !important;
    align-items: flex-start !important;
    justify-content: space-between !important;
    gap: 1rem !important;
}

.post-content {
    flex: 1;
    min-width: 0;
}
</style>
{{ end }}

{{ define "main" }}
<main id="main" class="archive">
  {{ if .Site.Params.enableDuckDuckGoSearchBox }}
  <div id="searchbox">
    <form method="get" id="ddgSearch" target="_blank" action="https://duckduckgo.com/">
        <input type="hidden" name="sites" value="{{ .Site.BaseURL }}"/>
        <input type="hidden" name="kf" value="-1"> <!-- no favicons -->
        <input type="hidden" name="kh" value="1"> <!-- https -->
        <input type="hidden" name="kae" value="d" > <!-- dark theme -->
        <input type="hidden" name="k1" value="-1" > <!-- no ads -->
        <input type="text" name="q" placeholder="Searchâ€¦" aria-label="Search akcube.github.io on DuckDuckGo"/>
        <button type="submit">
            <svg aria-hidden="true" height="1rem" viewBox="0 0 16 16" version="1.1" width="1rem" data-view-component="true" class="octicon octicon-search Button-visual">
            <path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"></path>
            </svg>
          </button>
    </form>
  </div>
  {{ end }}
  {{ range .Pages.GroupByDate "2006-01" }}
  <div class="post-group">
    <h3>{{ dateFormat "January 2006" (printf "%s-01" .Key) }}</h3>
    <ul class="post-group">
  {{ range .Pages }}
  <li class="post-item">
    <div class="post-content">
      <a class="post-title" href="{{ .RelPermalink }}">{{ .Title }}</a>
      <time class="post-date">{{ .PublishDate.Format .Site.Params.dateFormat }}</time>
    </div>
    <div class="post-topics">
      {{ if .Params.tags }}
        {{ range .Params.tags }}
          {{ $displayTag := replace . "-" "/" }}
          {{ $parts := split $displayTag "/" }}
          {{ $lastIndex := sub (len $parts) 1 }}
          <a class="blog-tag" href='/tags/{{ . }}/'>
            <span class="tag-prefix">#</span>
            {{ range $index, $part := $parts }}
              {{ if eq $index $lastIndex }}
                <span class="tag-leaf">{{ $part }}</span>
              {{ else }}
                <span>{{ $part }}</span><span class="tag-separator">/</span>
              {{ end }}
            {{ end }}
          </a>
        {{ end }}
      {{ end }}
    </div>
  </li>
  {{ end }}
</ul>
  </div>
  {{ end }}
  <div class="post-group">
    <h3>...</h3>
  </div>
</main>
{{ end }}
